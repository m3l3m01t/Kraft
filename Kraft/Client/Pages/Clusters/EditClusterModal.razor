<Modal @ref="_modal">
    <ModalContent IsCentered="true">
        <ModalHeader>
            <ModalTitle>
                <Icon Name="IconName.Edit" />
                @Title
            </ModalTitle>
            <CloseButton Clicked="@HideModal" />
        </ModalHeader>
        <ModalBody>
            <Field>
                <FieldLabel>KafkaCluster Name</FieldLabel>
                <TextEdit Placeholder="KafkaCluster Name..." @bind-Text="Value.Name" />
            </Field>
            <Field>
                <FieldLabel>Bootstrap Servers</FieldLabel>
                <TextEdit Placeholder="Server:Port" @bind-Text="Value.Brokers" />
            </Field>
            <Field>
                <FieldLabel>Zookeeper Servers</FieldLabel>
                <TextEdit Placeholder="Server:Port" @bind-Text="Value.ZkServers" />
            </Field>
            <Field>
                <FieldLabel>Description</FieldLabel>
                <TextEdit Placeholder="KafkaCluster description ..." @bind-Text="Value.Description" />
            </Field>
        </ModalBody>
        <ModalFooter>
            <Button Color="Color.Secondary" Clicked="@HideModal">Close</Button>
            <Button Color="Color.Primary" Clicked="@SaveChanges">@PrimaryText</Button>
        </ModalFooter>
    </ModalContent>
</Modal>

@code {
    private Modal _modal;

    private string PrimaryText { get; set; }
    private string Title { get; set; }

    public Kraft.Shared.Cluster Value { get; set; } = new Kraft.Shared.Cluster();

    [Parameter]
    public EventCallback<Kraft.Shared.Cluster> OnSaveChanges { get; set; }

    [Parameter]
    public EventCallback OnHideModal { get; set; }

    private Task HideModal()
    {
        _modal.Hide();

        return OnHideModal.InvokeAsync(null);
    }

    private async Task SaveChanges()
    {
        await OnSaveChanges.InvokeAsync(Value);

        _modal.Hide();
    }

    public Task EditCluster(Kraft.Shared.Cluster cluster, bool add)
    {
        Value = cluster;

        if (add)
        {
            PrimaryText = "Add";
            Title = "Add KafkaCluster";
        }
        else
        {
            PrimaryText = "Apply";
            Title = "Edit KafkaCluster";
        }

        StateHasChanged();

        _modal.Show();

        return Task.CompletedTask;
    }
}
